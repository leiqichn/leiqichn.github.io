<%
// var parent = page.categories.filter(c => !c.parent)
var parent = site.categories
if (Array.isArray(site.category_bar)) {
  // parent = page.categories.filter(cat => page.category_bar.indexOf(cat.name) !== -1)
  parent = site.categories
}
// var filterIds = page.categories.map(c => c._id)
var filterIds = site.categories.map(c => c._id)
// filterIds.push(page._id)
%>

<%- partial('_partials/category-list', {
  curCats  : parent,
  params: {
    type     : 'post',
    filterIds: filterIds,
    postLimit: theme.post.category_bar.post_limit,
    postOrderBy: theme.post.category_bar.post_order_by || config.index_generator.order_by
  }
}) %>
